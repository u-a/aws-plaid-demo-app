schema {
  query: Query
}

type Query {
  getItems(limit: Int, cursor: String): PaginatedItems!
  getAccounts(id: ID!): [Account!]!
  getTransactions(id: ID!, limit: Int, cursor: String): PaginatedTransactions!
  getFinancialSummary: FinancialSummary!
  getItemsWithAccounts: [ItemWithAccounts!]!
}

type Item {
  item_id: ID!
  institution_id: ID!
  institution_name: String!
}

type PaginatedItems {
  cursor: String
  items: [Item!]!
}

type Account {
  account_id: ID!
  type: String
  name: String
  subtype: String
  balances: Balances
  mask: String
}

type Balances {
  current: String
  iso_currency_code: String
}

type Transaction {
  transaction_id: ID!
  account_id: ID
  amount: String
  name: String
  iso_currency_code: String
  date: String
  payment_channel: String
  transaction_type: String
}

type PaginatedTransactions {
  cursor: String
  transactions: [Transaction!]!
}

type FinancialSummary {
  totalAssets: Float!
  totalLiabilities: Float!
  netWorth: Float!
  assetsByType: AssetBreakdown!
  liabilitiesByType: LiabilityBreakdown!
  lastUpdated: AWSDateTime!
}

type AssetBreakdown {
  depository: Float!
  investment: Float!
  total: Float!
}

type LiabilityBreakdown {
  credit: Float!
  loan: Float!
  total: Float!
}

type ItemWithAccounts {
  item_id: ID!
  institution_id: String!
  institution_name: String!
  accounts: [Account!]!
  totalBalance: Float
  accountCount: Int!
}